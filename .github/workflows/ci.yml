name: CI
on:
  pull_request:
    paths:
      # Crystal code and dependencies
      - "*.cr"
      - "shard.*"
      # Test harness
      - "docker-compose.yml"
      - "Dockerfile"
      - "test"

  push:
    branches:
      - master

jobs:
  test:
    uses: PlaceOS/.github/.github/workflows/containerised-test.yml@refactor/extract-cr-version

  crystal-style:
    uses: PlaceOS/.github/.github/workflows/crystal-style.yml@main

  dockerfile-style:
    uses: PlaceOS/.github/.github/workflows/dockerfile-style.yml@main
